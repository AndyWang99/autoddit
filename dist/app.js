(function(e){function t(t){for(var n,o,s=t[0],c=t[1],d=t[2],u=0,f=[];u<s.length;u++)o=s[u],a[o]&&f.push(a[o][0]),a[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(f.length)f.shift()();return i.push.apply(i,d||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,s=1;s<r.length;s++){var c=r[s];0!==a[c]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},a={app:0},i=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/autoddit/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var l=c;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"21bb":function(e,t,r){"use strict";var n=r("bcc9"),a=r.n(n);a.a},"4cd2":function(e,t,r){},5254:function(e,t,r){"use strict";var n=r("80e5"),a=r.n(n);a.a},"5c0b":function(e,t,r){"use strict";var n=r("5e27"),a=r.n(n);a.a},"5e27":function(e,t,r){},"80e5":function(e,t,r){},b445:function(e){e.exports={example:{text:"hello world",phone:"4759349273"}}},bcc9:function(e,t,r){},cd49:function(e,t,r){"use strict";r.r(t);var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},i=[],o=(r("b445"),n["default"].extend({name:"home"})),s=o,c=(r("5c0b"),r("2877")),d=Object(c["a"])(s,a,i,!1,null,null,null),l=d.exports,u=r("8c4f"),f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("b-container",{staticClass:"m-4",attrs:{fluid:""}},[r("b-row",[r("b-col",{attrs:{md:"6","offset-md":"3"}},[r("b-row",[r("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[e.doneLoading?r("b-col",{key:e.currThread},[r("b-row",[r("h5",{staticClass:"title"},[e._v("\n                  "+e._s(e.threadsFiltered[e.currThread].title)+"\n                ")])]),e.threadsFiltered[e.currThread].selftext?r("b-row",{staticClass:"post-body"},[e._v(e._s(e.threadsFiltered[e.currThread].selftext))]):e._e(),e.threadsFiltered[e.currThread].img?r("b-row",{staticClass:"post-body"},[r("img",{staticClass:"media",attrs:{src:e.threadsFiltered[e.currThread].url}})]):e._e(),e.threadsFiltered[e.currThread].vid?r("b-row",{staticClass:"post-body"},[r("iframe",{staticClass:"media",attrs:{allow:"autoplay",src:e.threadsFiltered[e.currThread].vid}})]):e._e(),r("comments",{staticClass:"comments",attrs:{comments:e.threadsFiltered[e.currThread].comments}})],1):e._e()],1),e.doneLoading?e._e():r("b-col",[r("b-row",[r("loading")],1)],1)],1)],1),r("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[e.doneLoading?r("b-col",{staticClass:"settings",attrs:{"offset-md":"1",md:"2"}},[r("b-row",[r("b-checkbox",{model:{value:e.enableTTS,callback:function(t){e.enableTTS=t},expression:"enableTTS"}},[e._v("\n              Text-to-speech\n            ")])],1)],1):e._e()],1)],1)],1)],1)},h=[],m=(r("4917"),r("ac6a"),r("f3e2"),r("96cf"),r("3b8d")),p=(r("d25f"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"comments"},[r("b-row",[r("b-col",e._l(e.comments,(function(t){return r("b-row",{key:t.id,staticClass:"mb-1"},[r("b-col",[r("b-row",{style:e.style},[e._v("\n            "+e._s(t.body)+"\n          ")]),t.replies?r("comments",{attrs:{comments:t.replies,depth:e.depth+1}}):e._e()],1)],1)})),1)],1)],1)}),v=[],b=(r("c5f6"),n["default"].extend({name:"comments",props:{comments:Array,depth:{type:Number,default:0}},computed:{style:function(){var e=5*Number(this.depth);return"padding-left: "+e+"vw"}}})),T=b,g=(r("5254"),Object(c["a"])(T,p,v,!1,null,"c3e8d6dc",null)),w=g.exports,y=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},_=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"lds-dual-ring"},[r("div")])}],x=n["default"].extend({name:"loading"}),S=x,C=(r("f068"),Object(c["a"])(S,y,_,!1,null,"19e7d867",null)),j=C.exports,F=n["default"].extend({name:"home",components:{Comments:w,Loading:j},data:function(){return{threads:[],currThread:0,enableTTS:!1,doneLoading:!1,intervalId:-1}},created:function(){var e=this;e.getPostsAndComments("aww","hot")},computed:{threadsFiltered:function(){var e=this,t=this.threads.filter((function(t){return e.isUrlComments(t.url)||t.img||t.vid}));return t}},watch:{enableTTS:function(e){e?this.doTTS():this.doInterval()}},methods:{getPostsAndComments:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this,e.next=3,fetch("https://www.reddit.com/r/"+t+"/"+r+".json");case 3:return a=e.sent,e.next=6,a.json();case 6:i=e.sent,o=i.data.children,o.forEach(function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var r,a,i,s,c,d,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="https://www.reddit.com"+t.data.permalink+".json?limit=3",e.next=3,fetch(r);case 3:return a=e.sent,e.next=6,a.json();case 6:i=e.sent,s=function e(t){var r=[];return t.forEach((function(t){if(t.data.body){var n={body:t.data.body,replies:t.data.replies?e(t.data.replies.data.children):[],id:t.data.id};r.push(n)}})),r},c=i[1].data.children,d=s(c),l=i[0].data.children[0].data,u={title:l.title,selftext:l.selftext,url:l.url,img:n.isUrlImg(l.url)?l.url:"",vid:l.media&&l.media.reddit_video?l.media.reddit_video.fallback_url:"",duration:l.media&&l.media.reddit_video?1e3*l.media.reddit_video.duration:0,comments:d},n.threads.push(u),t===o[o.length-1]&&(n.doneLoading=!0,n.enableTTS||(n.intervalId=n.incrementCurrThreadInterval()));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}());case 9:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}(),isUrlImg:function(e){return null!=e.match(/\.(jpeg|jpg|gif|png)$/)},isUrlComments:function(e){return null!=e.match(/www.reddit.com/)},doTTS:function(){var e=this;if(e.enableTTS){clearInterval(e.intervalId);var t=e.threadsFiltered[e.currThread].title+". ";e.threadsFiltered[e.currThread].selftext&&(t+=e.threadsFiltered[e.currThread].selftext+". ");var r=new SpeechSynthesisUtterance(t);r.addEventListener("end",(function(t){if(e.enableTTS){var r=0;e.threadsFiltered[e.currThread].vid?r=e.threadsFiltered[e.currThread].duration:e.threadsFiltered[e.currThread].img&&(r=3e3),setTimeout((function(){var t=e.commentsSpeechify(e.threadsFiltered[e.currThread].comments),r=new SpeechSynthesisUtterance(t);r.addEventListener("end",(function(t){e.enableTTS&&setTimeout((function(){e.currThread++,e.doTTS()}),2e3)})),speechSynthesis.speak(r)}),r)}})),speechSynthesis.speak(r)}},doInterval:function(){var e=this;e.enableTTS||(speechSynthesis.cancel(),e.intervalId=e.incrementCurrThreadInterval())},incrementCurrThreadInterval:function(){var e=this,t=5e3;return e.threadsFiltered[e.currThread].vid?t+=e.threadsFiltered[e.currThread].duration:e.threadsFiltered[e.currThread].img&&(t+=3e3),setInterval((function(){e.currThread++,clearInterval(e.intervalId),e.intervalId=e.incrementCurrThreadInterval()}),t)},commentsSpeechify:function(e){var t=this,r="";return e.forEach((function(e){r+=e.body+". "+t.commentsSpeechify(e.replies)})),r}}}),k=F,I=(r("21bb"),Object(c["a"])(k,f,h,!1,null,null,null)),O=I.exports;n["default"].use(u["a"]);var E=new u["a"]({mode:"history",base:"/autoddit/",routes:[{path:"/",name:"home",component:O}]}),L=r("9483");Object(L["a"])("".concat("/autoddit/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});r("21b6");var P=r("5f5b");n["default"].use(P["a"]),n["default"].config.productionTip=!1,new n["default"]({router:E,render:function(e){return e(l)}}).$mount("#app")},f068:function(e,t,r){"use strict";var n=r("4cd2"),a=r.n(n);a.a}});
//# sourceMappingURL=app.js.map